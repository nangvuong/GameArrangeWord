<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.Circle?>

<StackPane xmlns:fx="http://javafx.com/fxml"
    fx:controller="com.ltm.game_client_v3.views.HomeController"
    stylesheets="@homeview.css"
    prefWidth="1280" prefHeight="720">

    <!-- ðŸŒŒ Background -->
    <ImageView fitWidth="1280" fitHeight="720" preserveRatio="false">
        <image>
            <Image url="@../images/home-bg.jpg" />
        </image>
    </ImageView>

    <!-- ðŸ”¹ Lá»›p phá»§ lÃ m tá»‘i background -->
    <Pane style="-fx-background-color: rgba(0,0,0,0.45);" />

    <!-- ðŸ”¹ Main content -->
    <BorderPane styleClass="home-container">
        <!-- Top bar -->
        <top>
            <BorderPane styleClass="top-bar">
                <!-- ðŸ”¸ Left: sound button -->
                <left>
                    <Button fx:id="soundButton" styleClass="icon-button" />
                </left>

                <!-- ðŸ”¸ Center: welcome text -->
                <center>
                    <Label fx:id="welcomeLabel" text="Welcome, Player!"
                        styleClass="welcome-label" />
                </center>

                <!-- ðŸ”¸ Right: logout button -->
                <right>
                    <Button fx:id="logoutButton" text="ÄÄƒng xuáº¥t"
                        onAction="#onLogout" styleClass="logout-button" />
                </right>
            </BorderPane>
        </top>

        <center>
            <VBox spacing="20" alignment="TOP_CENTER" style="-fx-padding: 20;">
                <!-- Main content area -->
                <HBox spacing="20" alignment="TOP_CENTER" VBox.vgrow="ALWAYS">
                    <!-- Right: Online players list -->
                    <VBox spacing="10" prefWidth="300" styleClass="players-panel">
                        <Label text="ðŸ‘¥ Online Players" styleClass="players-title" />
                        <ListView fx:id="onlinePlayersList" styleClass="player-list"
                            prefWidth="280" prefHeight="400" />
                    </VBox>

                    <!-- Left: How to Play Guide -->
                    <VBox spacing="20" prefWidth="600" alignment="TOP_CENTER">

                        <!-- ðŸ“– How to Play Section -->
                        <VBox spacing="15" styleClass="how-to-play-panel" VBox.vgrow="ALWAYS">
                            <!-- Header -->
                            <HBox alignment="CENTER_LEFT" spacing="12" styleClass="guide-header">
                                <Circle radius="20" styleClass="icon-circle-guide"/>
                                <Label text="ðŸŽ®" style="-fx-font-size: 24px;"/>
                                <Label text="HOW TO PLAY" styleClass="guide-title"/>
                            </HBox>

                            <!-- Game Rules ScrollPane -->
                            <ScrollPane styleClass="guide-scroll" fitToWidth="true" VBox.vgrow="ALWAYS">
                                <VBox spacing="20" styleClass="guide-content">
                                    <padding>
                                        <Insets top="15" right="15" bottom="15" left="15"/>
                                    </padding>

                                    <!-- Step 1 -->
                                    <HBox spacing="15" alignment="TOP_LEFT" styleClass="guide-step">
                                        <StackPane styleClass="step-number-circle">
                                            <Label text="1" styleClass="step-number"/>
                                        </StackPane>
                                        <VBox spacing="5">
                                            <Label text="INVITE OR GET INVITED" styleClass="step-title"/>
                                            <Label text="Right-click on an online player and select 'Invite to Game', or wait for someone to invite you." 
                                                   wrapText="true" styleClass="step-description"/>
                                        </VBox>
                                    </HBox>

                                    <Separator styleClass="guide-separator"/>

                                    <!-- Step 2 -->
                                    <HBox spacing="15" alignment="TOP_LEFT" styleClass="guide-step">
                                        <StackPane styleClass="step-number-circle">
                                            <Label text="2" styleClass="step-number"/>
                                        </StackPane>
                                        <VBox spacing="5">
                                            <Label text="SORT THE ITEMS" styleClass="step-title"/>
                                            <Label text="When the game starts, you'll see random numbers or letters. Click on them to move them to the bottom row and sort them in the correct order (ascending or descending)." 
                                                   wrapText="true" styleClass="step-description"/>
                                        </VBox>
                                    </HBox>

                                    <Separator styleClass="guide-separator"/>

                                    <!-- Step 3 -->
                                    <HBox spacing="15" alignment="TOP_LEFT" styleClass="guide-step">
                                        <StackPane styleClass="step-number-circle">
                                            <Label text="3" styleClass="step-number"/>
                                        </StackPane>
                                        <VBox spacing="5">
                                            <Label text="SUBMIT YOUR ANSWER" styleClass="step-title"/>
                                            <Label text="Once you've sorted all items correctly, click the 'SEND' button. The faster you complete, the higher your score!" 
                                                   wrapText="true" styleClass="step-description"/>
                                        </VBox>
                                    </HBox>

                                    <Separator styleClass="guide-separator"/>

                                    <!-- Step 4 -->
                                    <HBox spacing="15" alignment="TOP_LEFT" styleClass="guide-step">
                                        <StackPane styleClass="step-number-circle">
                                            <Label text="4" styleClass="step-number"/>
                                        </StackPane>
                                        <VBox spacing="5">
                                            <Label text="WIN THE MATCH" styleClass="step-title"/>
                                            <Label text="After multiple rounds, the player with the highest total score wins. You can invite your opponent to play another match!" 
                                                   wrapText="true" styleClass="step-description"/>
                                        </VBox>
                                    </HBox>

                                    <!-- Tips Section -->
                                    <VBox spacing="10" styleClass="tips-section">
                                        <Label text="ðŸ’¡ PRO TIPS" styleClass="tips-title"/>
                                        <Label text="â€¢ Speed matters! Complete sorting as fast as possible" styleClass="tip-item"/>
                                        <Label text="â€¢ Watch the timer - you have limited time per round" styleClass="tip-item"/>
                                        <Label text="â€¢ Check if it's ascending or descending order" styleClass="tip-item"/>
                                        <Label text="â€¢ Use the RESET button to restart if needed" styleClass="tip-item"/>
                                    </VBox>
                                </VBox>
                            </ScrollPane>
                        </VBox>

                        <!-- Action Buttons -->
                        <HBox spacing="20" alignment="CENTER">
                            <Button fx:id="scoreboardButton" text="ðŸ† LEADERBOARD"
                                onAction="#onScoreboard"
                                styleClass="primary-button" />
                        </HBox>
                    </VBox>

                </HBox>
            </VBox>
        </center>
    </BorderPane>

    <!--THÃŠM PHáº¦N NÃ€Y: TextArea áº©n Ä‘á»ƒ controller khÃ´ng bá»‹ lá»—i -->
    <TextArea fx:id="messageArea" visible="false" managed="false"/>
</StackPane>